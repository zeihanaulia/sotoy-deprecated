<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Membuat Aplikasi Pencatatan Keuangan dengan Golang dan GraphQL"><meta property="og:title" content="Membuat Aplikasi Pencatatan Keuangan dengan Golang dan GraphQL"><meta property="og:description" content="GraphQL di tahun 2020 sudah menjadi normal baru didunia pengembangan perangkat lunak. Alat-alat atau pustaka untuk membangun GraphQL server sudah banyak sekali ada dibermacam-macam bahasa pemrogaman juga. Di tutorial kali ini, saya akan coba untuk membangun aplikasi menggunakan GraphQL sebagai penyedia datanya. Aplikasi yang akan dibangun adalah aplikasi pencatatan keuangan pribadi.
Gqlgen Gqlgen adalah salah satu pustaka yang dapat membantu kita membangun GraphQL Server.
Memperpersiapkan Proyek $ mkdir cawang $ cd cawang $ go mod init github."><meta property="og:type" content="article"><meta property="og:url" content="https://sotoy.github.io/posts/graphql/graphql-multiple-result-for-error-handling.html"><meta property="article:published_time" content="2020-03-02T00:00:00+00:00"><meta property="article:modified_time" content="2020-03-02T00:00:00+00:00"><title>Membuat Aplikasi Pencatatan Keuangan dengan Golang dan GraphQL | Sotoy</title><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.edc993575be58655f3e49634e3ca6db09cc38ac9aa03ecdbe81d941636e35273.css integrity="sha256-7cmTV1vlhlXz5JY048ptsJzDismqA+zb6B2UFjbjUnM="><script defer src=/id.search.min.b3f12112f5a8b57538d48e13bcfbe8a4786bbcf5ed58800e9b56500f5e04f337.js integrity="sha256-s/EhEvWotXU41I4TvPvopHhrvPXtWIAOm1ZQD14E8zc="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>Sotoy</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder aria-label maxlength=64 data-hotkeys=s/><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/about.html>Ini tuh apa?</a></li></ul><ul><li><a href=/posts.html>Blog</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Membuat Aplikasi Pencatatan Keuangan dengan Golang dan GraphQL</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#gqlgen>Gqlgen</a></li><li><a href=#memperpersiapkan-proyek>Memperpersiapkan Proyek</a></li><li><a href=#membangun-graphql-server>Membangun GraphQL Server</a></li><li><a href=#persiapan-aplikasi>Persiapan aplikasi</a></li></ul></nav></aside></header><article class=markdown><h1><a href=/posts/graphql/graphql-multiple-result-for-error-handling.html>Membuat Aplikasi Pencatatan Keuangan dengan Golang dan GraphQL</a></h1><h5>2020/03/02</h5><div><a href=/categories/tutorial.html>tutorial</a></div><div><a href=/tags/go.html>go</a>,
<a href=/tags/golang.html>golang</a>,
<a href=/tags/graphql.html>graphql</a></div><p><p>GraphQL di tahun 2020 sudah menjadi normal baru didunia pengembangan perangkat lunak.
Alat-alat atau pustaka untuk membangun GraphQL server sudah banyak sekali ada dibermacam-macam bahasa pemrogaman juga.
Di tutorial kali ini, saya akan coba untuk membangun aplikasi menggunakan GraphQL sebagai penyedia datanya.
Aplikasi yang akan dibangun adalah aplikasi pencatatan keuangan pribadi.</p><h2 id=gqlgen>Gqlgen</h2><p>Gqlgen adalah salah satu pustaka yang dapat membantu kita membangun GraphQL Server.</p><h2 id=memperpersiapkan-proyek>Memperpersiapkan Proyek</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ mkdir cawang
$ cd cawang
$ go mod init github.com/zeihanaulia/cawang
$ go get github.com/99designs/gqlgen
</code></pre></div><p>Buatlah folder dengan nama <code>cawang</code>. Cawang adalah nama dari aplikasinya singkatan dari <code>catat uang</code>.
Masuk kedalam folder <code>cawang</code>.
Lalu lakukan inisiasi untuk go modules karena aplikasi ini dibuat dengan bahasa go.
Dan terakhir kita unduh gqlgen dengan menggunakan <code>go get</code></p><h2 id=membangun-graphql-server>Membangun GraphQL Server</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ go run github.com/99designs/gqlgen init
</code></pre></div><p>inisiasi gqlgen dan secara otomatis akan menghasilkan tata letak paket go.
file apa saja yang didapat?</p><ul><li>folder <code>graph</code> tempat dimana kode yang berhubungan dengan graphql diletakan</li><li>gqlgen.yml file config yang dapat digunakan untuk pengaturan tata letak gqlgen</li><li>server.go file yang digunakan untuk menjalankan server graphql</li></ul><h2 id=persiapan-aplikasi>Persiapan aplikasi</h2><p>Untuk membangun aplikasi yang kita ingin kan, kita kosongkan isi dari folder graph
Untuk membuat pencatatan keuangan sederhana tipe diperlukan, Pengguna, Rekening dan Transaksi</p><p><strong>Pengguna</strong> dapat membuat <strong>Rekening</strong> yang akan dicatat didalam <strong>Transaksi</strong></p><p>Budi ingin mencatat keuangannya, yang dia ingin catat</p><ul><li>Uang masuk atau keluar? atau perpindahan rekening (misal dari saldo bank BCA ke GoPay)</li><li>Jumlah nominal uang yang dikeluarkan</li><li>Kategori Pengeluaran (Makanan, Transportasi, Belanja Bulanan, dll)</li><li>Menggunakan sumber uang dari rekening mana? (Bank atau cash atau gopay)</li><li>Tanggal dan jam transaksi terjadi</li><li>Keterangan</li></ul><p>Untuk tahap awal sepertinya cerita diatas cukup sederhana dan bisa dilakukan pengembangan.</p><p>Buat skema berdasarkan cerita diatas. Lalu jalankan kode, untuk mengasilkan file baru</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ go run github.com/99designs/gqlgen -v
</code></pre></div><p>Kita perlu mengubah sedikit pada aturan standar <code>gqlgen.yml</code> dengan mendeklarasikan type mapping antara graphql dan go type system.
Tapi sebelum itu, kita pindahkan dulu model yang sudah dihasilkan ke file tersendiri. Kenapa?</p><p>Mekanisme dari menjalankan <code>go run github.com/99designs/gqlgen</code> adalah menghapus dan menghasilkan lagi <code>models_gen.go</code>.
Sehingga ketika kita melakukan type mapping akan gagal karena modelnya tidak ada.</p><p>Sekarang sudah banyak nih resolvernya, ada <code>accountResolver</code>, <code>mutationResolver</code>, <code>queryResolver</code>, <code>transactionResolver</code> dan <code>userResolver</code>.</p><p><code>mutationResolver</code> dan <code>queryResolver</code> adalah default dari GraphQL, bisa dibilang sebagai pintu masuknya.
Jika ingin memutasi (create, update, delete) dapat menggunakan <code>mutationResolver</code>.
Jika ingin meminta darta (read) dapat menggunakan <code>queryResolver</code>.</p><p>Lalu <code>accountResolver</code>, <code>transactionResolver</code> dan <code>userResolver</code> ini apa? resolver ini yang akan mengeluarkan data dari type logika bisnis.
Seperti yang kita tau, aplikasi kita ada 3 domain yaitu <code>Account</code>, <code>Transaction</code> dan <code>User</code>. Karena pada skema mendefinikan relasi.
Maka kita dapat resolver tambahan yang mencerminkan logika bisnis.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Account</span> {
    id: <span style=color:#a6e22e>ID</span>!
    <span style=color:#66d9ef>type</span>: <span style=color:#a6e22e>TypeOfAccount</span>!
    <span style=color:#a6e22e>name</span>: <span style=color:#a6e22e>String</span>!
    bank: <span style=color:#a6e22e>String</span>
    balance: <span style=color:#a6e22e>Float</span>!
    balanceMinimum: <span style=color:#a6e22e>Float</span>
    Description: <span style=color:#a6e22e>String</span>

    transactions: [<span style=color:#a6e22e>Transaction</span>]
    user: <span style=color:#a6e22e>User</span>!
}
</code></pre></div><p>Jika dilihat dari skema diatas, maka generator akan menghasilkan:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>accountResolver</span>) <span style=color:#a6e22e>Transactions</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>, <span style=color:#a6e22e>obj</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>model</span>.<span style=color:#a6e22e>Account</span>) ([]<span style=color:#f92672>*</span><span style=color:#a6e22e>model</span>.<span style=color:#a6e22e>Transaction</span>, <span style=color:#66d9ef>error</span>) {
	panic(<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;not implemented&#34;</span>))
}
<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>accountResolver</span>) <span style=color:#a6e22e>User</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>, <span style=color:#a6e22e>obj</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>model</span>.<span style=color:#a6e22e>Account</span>) (<span style=color:#f92672>*</span><span style=color:#a6e22e>model</span>.<span style=color:#a6e22e>User</span>, <span style=color:#66d9ef>error</span>) {
	panic(<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;not implemented&#34;</span>))
}
<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Resolver</span>) <span style=color:#a6e22e>Account</span>() <span style=color:#a6e22e>generated</span>.<span style=color:#a6e22e>AccountResolver</span> { <span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>accountResolver</span>{<span style=color:#a6e22e>r</span>} }
<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>accountResolver</span> <span style=color:#66d9ef>struct</span>{ <span style=color:#f92672>*</span><span style=color:#a6e22e>Resolver</span> }
</code></pre></div></p></article><footer class=book-footer><div class="flex justify-between"><div><a class="flex align-center" href=https://github.com/zeihanaulia/sotoy/edit/master/content/posts/graphql/graphql-multiple-result-for-error-handling.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span></span></a></div></div><div class=book-comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"sotoy"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></footer></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#gqlgen>Gqlgen</a></li><li><a href=#memperpersiapkan-proyek>Memperpersiapkan Proyek</a></li><li><a href=#membangun-graphql-server>Membangun GraphQL Server</a></li><li><a href=#persiapan-aplikasi>Persiapan aplikasi</a></li></ul></nav></aside></main></body></html>